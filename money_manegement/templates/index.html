<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë¥¢Âä°ÁÆ°ÁêÜÁ≥ªÁªü - Êô∫ËÉΩËµÑ‰∫ßËøΩË∏™‰∏éÂàÜÊûê</title>

    <!-- Ê†∑ÂºèÊñá‰ª∂ -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/cards.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- ‰æßËæπÊ†è -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">üí∞</div>
                <h1 class="sidebar-title">Ë¥¢Âä°ÁÆ°ÁêÜ</h1>
            </div>

            <nav class="nav-menu">
                <!-- ‰∏ªË¶ÅÂäüËÉΩ -->
                <div class="nav-section">
                    <div class="nav-section-title">‰∏ªË¶ÅÂäüËÉΩ</div>
                    <ul class="nav-items">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-target="dashboard">
                                <span class="nav-icon">üìä</span>
                                <span>‰ª™Ë°®Áõò</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-target="accounts">
                                <span class="nav-icon">üí≥</span>
                                <span>Ë¥¶Êà∑ÁÆ°ÁêÜ</span>
                                <span class="nav-badge" id="accountCount">0</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-target="transactions">
                                <span class="nav-icon">üí∏</span>
                                <span>‰∫§ÊòìËÆ∞ÂΩï</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-target="analytics">
                                <span class="nav-icon">üìà</span>
                                <span>Êï∞ÊçÆÂàÜÊûê</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- ËÆæÁΩÆ -->
                <div class="nav-section">
                    <div class="nav-section-title">ËÆæÁΩÆ</div>
                    <ul class="nav-items">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-target="categories">
                                <span class="nav-icon">üè∑Ô∏è</span>
                                <span>ÂàÜÁ±ªÁÆ°ÁêÜ</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-target="import">
                                <span class="nav-icon">üì•</span>
                                <span>Êï∞ÊçÆÂØºÂÖ•</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-target="settings">
                                <span class="nav-icon">‚öôÔ∏è</span>
                                <span>Á≥ªÁªüËÆæÁΩÆ</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ‰æßËæπÊ†èÂ∫ïÈÉ® -->
            <div class="sidebar-footer">
                <div class="storage-info">
                    <small class="text-muted">Êï∞ÊçÆÂ≠òÂÇ®ÔºöÊú¨Âú∞</small>
                </div>
            </div>
        </aside>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- ‰ª™Ë°®ÁõòËßÜÂõæ -->
                <section id="dashboard-view" class="view-section">
                    <!-- È°µÈù¢Â§¥ÈÉ® -->
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">Ë¥¢Âä°‰ª™Ë°®Áõò</h1>
                                <p class="page-subtitle">
                                    Ê¨¢ËøéÂõûÊù•ÔºÅËøôÊòØÊÇ®ÁöÑË¥¢Âä°Ê¶ÇËßà
                                    <span class="text-muted">¬∑ ÊúÄÂêéÊõ¥Êñ∞Ôºö<span id="lastUpdateTime">ÂàöÂàö</span></span>
                                </p>
                            </div>
                            <div class="page-actions">
                                <button class="btn btn-secondary" id="refreshDashboard">
                                    <i class="bi bi-arrow-clockwise"></i> Âà∑Êñ∞
                                </button>
                                <button class="btn btn-primary" id="quickAddTransaction">
                                    <i class="bi bi-plus"></i> Âø´ÈÄüËÆ∞Ë¥¶
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ËµÑ‰∫ßÊÄªËßàÂç°Áâá -->
                    <div class="mb-4">
                        <div class="overview-card">
                            <div class="overview-title">ÊÄªËµÑ‰∫ß</div>
                            <div class="overview-value" id="total-assets">¬•0.00</div>
                            <div class="overview-subtitle">
                                ÂÖ± <span id="account-count">0</span> ‰∏™Ë¥¶Êà∑Ôºå
                                <span id="transaction-count">0</span> Á¨î‰∫§Êòì
                            </div>
                        </div>
                    </div>

                    <!-- ËµÑ‰∫ßÁ±ªÂûãÁªüËÆ° -->
                    <div class="stats-grid">
                        <div class="asset-type-card liquid" onclick="filterByType('ÊµÅÂä®ËµÑ‰∫ß')">
                            <div class="asset-type-header">
                                <div class="asset-type-info">
                                    <div class="asset-type-name">ÊµÅÂä®ËµÑ‰∫ß</div>
                                    <div class="asset-type-value">¬•0.00</div>
                                </div>
                                <div class="asset-type-icon liquid">üíµ</div>
                            </div>
                            <div class="asset-type-footer">
                                <div class="asset-type-change positive">
                                    <i class="bi bi-arrow-up"></i> 0.0%
                                </div>
                                <div class="asset-type-count">0% Âç†ÊØî</div>
                            </div>
                        </div>

                        <div class="asset-type-card investment" onclick="filterByType('ÊäïËµÑËµÑ‰∫ß')">
                            <div class="asset-type-header">
                                <div class="asset-type-info">
                                    <div class="asset-type-name">ÊäïËµÑËµÑ‰∫ß</div>
                                    <div class="asset-type-value">¬•0.00</div>
                                </div>
                                <div class="asset-type-icon investment">üìà</div>
                            </div>
                            <div class="asset-type-footer">
                                <div class="asset-type-change positive">
                                    <i class="bi bi-arrow-up"></i> 0.0%
                                </div>
                                <div class="asset-type-count">0% Âç†ÊØî</div>
                            </div>
                        </div>

                        <div class="asset-type-card fixed" onclick="filterByType('Âõ∫ÂÆöËµÑ‰∫ß')">
                            <div class="asset-type-header">
                                <div class="asset-type-info">
                                    <div class="asset-type-name">Âõ∫ÂÆöËµÑ‰∫ß</div>
                                    <div class="asset-type-value">¬•0.00</div>
                                </div>
                                <div class="asset-type-icon fixed">üè†</div>
                            </div>
                            <div class="asset-type-footer">
                                <div class="asset-type-change negative">
                                    <i class="bi bi-arrow-down"></i> 0.0%
                                </div>
                                <div class="asset-type-count">0% Âç†ÊØî</div>
                            </div>
                        </div>
                    </div>

                    <!-- ÂõæË°®Âå∫Âüü -->
                    <div class="charts-container">
                        <!-- ËµÑ‰∫ßË∂ãÂäøÂõæ -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">ËµÑ‰∫ßË∂ãÂäø</h3>
                                <div class="chart-options">
                                    <button class="chart-option active" onclick="switchChartPeriod('trend', '7d')">7Â§©</button>
                                    <button class="chart-option" onclick="switchChartPeriod('trend', '30d')">30Â§©</button>
                                    <button class="chart-option" onclick="switchChartPeriod('trend', '90d')">90Â§©</button>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="assetTrendChart"></canvas>
                            </div>
                        </div>

                        <!-- ËµÑ‰∫ßÂàÜÂ∏ÉÂõæ -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">ËµÑ‰∫ßÂàÜÂ∏É</h3>
                                <div class="chart-options">
                                    <button class="chart-option active" onclick="switchDistributionView('type')">ÊåâÁ±ªÂûã</button>
                                    <button class="chart-option" onclick="switchDistributionView('platform')">ÊåâÂπ≥Âè∞</button>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="assetTypePieChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Â∫ïÈÉ®ÁΩëÊ†º -->
                    <div class="bottom-grid">
                        <!-- ÊúÄËøë‰∫§Êòì -->
                        <div class="recent-transactions-card">
                            <div class="section-header">
                                <h3 class="section-title">ÊúÄËøë‰∫§Êòì</h3>
                                <a href="#" class="text-primary" onclick="event.preventDefault(); switchView('transactions')">Êü•ÁúãÂÖ®ÈÉ®</a>
                            </div>
                            <div id="recentTransactions">
                                <!-- Âä®ÊÄÅÂä†ËΩΩ -->
                            </div>
                        </div>

                        <!-- Ë¥¢Âä°ÊåáÊ†á -->
                        <div class="category-summary-card">
                            <div class="section-header">
                                <h3 class="section-title">Ë¥¢Âä°ÊåáÊ†á</h3>
                            </div>
                            <div class="financial-metrics">
                                <div class="metric-item">
                                    <span class="metric-label">ÊµÅÂä®ÊÄßÊØîÁéá</span>
                                    <span class="metric-value" id="liquidityRatio">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">ÊúàÂÇ®ËìÑÁéá</span>
                                    <span class="metric-value" id="savingsRate">-</span>
                                </div>
                                <div class="metric-item">
                                    <span class="metric-label">Â∫îÊÄ•Âü∫Èáë</span>
                                    <span class="metric-value" id="emergencyFund">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- È¢ùÂ§ñÁöÑÂõæË°®Âå∫Âüü -->
                    <div class="charts-container mt-4">
                        <!-- ÊúàÂ∫¶Êî∂ÊîØÂØπÊØî -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">ÊúàÂ∫¶Êî∂ÊîØÂØπÊØî</h3>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="monthlyIncomeExpenseChart"></canvas>
                            </div>
                        </div>

                        <!-- ËµÑ‰∫ßÂ¢ûÈïøË∂ãÂäø -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">ËµÑ‰∫ßÂ¢ûÈïøË∂ãÂäø</h3>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="assetGrowthChart"></canvas>
                            </div>
                        </div>

                        <!-- Êî∂ÊîØÂàÜÁ±ªÊòéÁªÜ -->
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Êî∂ÊîØÂàÜÁ±ªÊòéÁªÜ</h3>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="categoryBreakdownChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Ë¥¶Êà∑ÁÆ°ÁêÜËßÜÂõæ -->
                <section id="accounts-view" class="view-section d-none">
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">Ë¥¶Êà∑ÁÆ°ÁêÜ</h1>
                                <p class="page-subtitle">ÁÆ°ÁêÜÊÇ®ÁöÑÊâÄÊúâËµÑ‰∫ßË¥¶Êà∑</p>
                            </div>
                            <div class="page-actions">
                                <button class="btn btn-primary" onclick="openAccountModal()">
                                    <i class="bi bi-plus"></i> Êñ∞Â¢ûË¥¶Êà∑
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="accounts-container">
                        <!-- Âä®ÊÄÅÂä†ËΩΩË¥¶Êà∑ÂàóË°® -->
                    </div>
                </section>

                <!-- ‰∫§ÊòìËÆ∞ÂΩïËßÜÂõæ -->
                <section id="transactions-view" class="view-section d-none">
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">‰∫§ÊòìËÆ∞ÂΩï</h1>
                                <p class="page-subtitle">Êü•ÁúãÂíåÁÆ°ÁêÜÊâÄÊúâ‰∫§Êòì</p>
                            </div>
                            <div class="page-actions">
                                <button class="btn btn-primary" onclick="openTransactionModal()">
                                    <i class="bi bi-plus"></i> Êñ∞Â¢û‰∫§Êòì
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="transactions-container">
                        <!-- Âä®ÊÄÅÂä†ËΩΩ‰∫§ÊòìÂàóË°® -->
                    </div>
                </section>

                <!-- Êï∞ÊçÆÂàÜÊûêËßÜÂõæ -->
                <section id="analytics-view" class="view-section d-none">
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">Êï∞ÊçÆÂàÜÊûê</h1>
                                <p class="page-subtitle">Ê∑±ÂÖ•ÂàÜÊûêÊÇ®ÁöÑË¥¢Âä°Áä∂ÂÜµ</p>
                            </div>
                        </div>
                    </div>

                    <div id="analytics-container">
                        <!-- Âä®ÊÄÅÂä†ËΩΩÂàÜÊûêÂÜÖÂÆπ -->
                    </div>
                </section>

                <!-- ÂÖ∂‰ªñËßÜÂõæÔºàÂç†‰ΩçÔºâ -->
                <section id="categories-view" class="view-section d-none">
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">ÂàÜÁ±ªÁÆ°ÁêÜ</h1>
                                <p class="page-subtitle">ÁÆ°ÁêÜËµÑ‰∫ßÂàÜÁ±ª</p>
                            </div>
                        </div>
                    </div>
                    <div class="empty-state">
                        <div class="empty-state-icon">üè∑Ô∏è</div>
                        <div class="empty-state-title">ÂäüËÉΩÂºÄÂèë‰∏≠</div>
                        <div class="empty-state-description">ÂàÜÁ±ªÁÆ°ÁêÜÂäüËÉΩÂç≥Â∞ÜÊé®Âá∫</div>
                    </div>
                </section>

                <section id="import-view" class="view-section d-none">
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">Êï∞ÊçÆÂØºÂÖ•</h1>
                                <p class="page-subtitle">ÂØºÂÖ•Â§ñÈÉ®Êï∞ÊçÆ</p>
                            </div>
                        </div>
                    </div>
                    <div class="empty-state">
                        <div class="empty-state-icon">üì•</div>
                        <div class="empty-state-title">ÂäüËÉΩÂºÄÂèë‰∏≠</div>
                        <div class="empty-state-description">Êï∞ÊçÆÂØºÂÖ•ÂäüËÉΩÂç≥Â∞ÜÊé®Âá∫</div>
                    </div>
                </section>

                <section id="settings-view" class="view-section d-none">
                    <div class="page-header">
                        <div class="page-header-content">
                            <div>
                                <h1 class="page-title">Á≥ªÁªüËÆæÁΩÆ</h1>
                                <p class="page-subtitle">ÈÖçÁΩÆÁ≥ªÁªüÂèÇÊï∞</p>
                            </div>
                        </div>
                    </div>
                    <div class="empty-state">
                        <div class="empty-state-icon">‚öôÔ∏è</div>
                        <div class="empty-state-title">ÂäüËÉΩÂºÄÂèë‰∏≠</div>
                        <div class="empty-state-description">Á≥ªÁªüËÆæÁΩÆÂäüËÉΩÂç≥Â∞ÜÊé®Âá∫</div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- ÁßªÂä®Á´ØËèúÂçïÊåâÈíÆ -->
    <button class="menu-toggle" id="menuToggle">
        <i class="bi bi-list"></i>
    </button>

    <!-- ‰æßËæπÊ†èÈÅÆÁΩ©Â±Ç -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Ë¥¶Êà∑Ê®°ÊÄÅÊ°Ü -->
    <div id="accountModal" class="modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Êñ∞Â¢ûË¥¶Êà∑</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="accountForm">
                    <input type="hidden" id="accountId" name="accountId">

                    <div class="form-group">
                        <label class="form-label" for="accountName">Ë¥¶Êà∑ÂêçÁß∞ *</label>
                        <input type="text" class="form-control" id="accountName" name="name" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="accountCategory">Ë¥¶Êà∑ÂàÜÁ±ª *</label>
                            <select class="form-control form-select" id="accountCategory" name="category_id" required>
                                <option value="">ËØ∑ÈÄâÊã©ÂàÜÁ±ª</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="accountPlatform">ÊâÄÂ±ûÂπ≥Âè∞</label>
                            <input type="text" class="form-control" id="accountPlatform" name="platform"
                                   placeholder="Â¶ÇÔºöÂ∑•ÂïÜÈì∂Ë°å„ÄÅÊîØ‰ªòÂÆù">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="accountBalance">ÂΩìÂâç‰ΩôÈ¢ù *</label>
                            <input type="number" class="form-control" id="accountBalance" name="balance"
                                   step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="accountNumber">Ë¥¶Âè∑ÂêéÂõõ‰Ωç</label>
                            <input type="text" class="form-control" id="accountNumber" name="account_number"
                                   maxlength="4" placeholder="1234">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="accountDescription">Â§áÊ≥®ËØ¥Êòé</label>
                        <textarea class="form-control" id="accountDescription" name="description"
                                  rows="3" placeholder="ÂèØÈÄâÂ°´ÂÜôË¥¶Êà∑Áî®ÈÄîÁ≠â‰ø°ÊÅØ"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">ÂèñÊ∂à</button>
                <button type="submit" form="accountForm" class="btn btn-primary">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- ‰∫§ÊòìÊ®°ÊÄÅÊ°Ü -->
    <div id="transactionModal" class="modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 class="modal-title">Êñ∞Â¢û‰∫§Êòì</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="transactionForm">
                    <input type="hidden" id="transactionId" name="transactionId">

                    <div class="form-group">
                        <label class="form-label" for="transactionAccount">ÈÄâÊã©Ë¥¶Êà∑ *</label>
                        <select class="form-control form-select" id="transactionAccount" name="account_id" required>
                            <option value="">ËØ∑ÈÄâÊã©Ë¥¶Êà∑</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="transactionDate">‰∫§ÊòìÊó•Êúü *</label>
                        <input type="date" class="form-control" id="transactionDate" name="date" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="transactionAmount">‰∫§ÊòìÈáëÈ¢ù *</label>
                            <input type="number" class="form-control" id="transactionAmount" name="amount"
                                   step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">‰∫§ÊòìÁ±ªÂûã *</label>
                            <div style="display: flex; gap: 16px; margin-top: 8px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="radio" name="type" value="Êî∂ÂÖ•" checked style="margin-right: 8px;">
                                    <span style="color: var(--success-color); font-weight: 500;">Êî∂ÂÖ•</span>
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="radio" name="type" value="ÊîØÂá∫" style="margin-right: 8px;">
                                    <span style="color: var(--danger-color); font-weight: 500;">ÊîØÂá∫</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="transactionDescription">‰∫§ÊòìËØ¥Êòé</label>
                        <input type="text" class="form-control" id="transactionDescription" name="description"
                               placeholder="ËØ∑ËæìÂÖ•‰∫§ÊòìËØ¥Êòé">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="transactionNote">Â§áÊ≥®</label>
                        <textarea class="form-control" id="transactionNote" name="note"
                                  rows="2" placeholder="ÂèØÈÄâÂ°´ÂÜôÂ§áÊ≥®‰ø°ÊÅØ"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">ÂèñÊ∂à</button>
                <button type="submit" form="transactionForm" class="btn btn-primary">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- JavaScriptÊñá‰ª∂ -->
    <script src="/static/js/app.js"></script>
    <script src="/static/js/charts.js"></script>
    <script src="/static/js/dashboard.js"></script>
</body>
</html>